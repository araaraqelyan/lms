{% extends 'layouts/base-fullscreen.html' %}
{% load i18n static admin_soft %}

{% block content %}

{% load i18n static admin_soft %}

<div style="display: flex;">
  <aside style="position: sticky" class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3 "
        id="sidenav-main">
      <div class="sidenav-header">
          <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none"
            aria-hidden="true" id="iconSidenav"></i>
          <a class="navbar-brand m-0" href="{% url 'admin:index' %}">
          </a>
      </div>
      <hr class="horizontal dark mt-0">
      <div class="collapse navbar-collapse  w-auto " id="sidenav-collapse-main">
          <ul class="navbar-nav">
              <li class="nav-item">
                  <a class="nav-link  " href="{% url 'profile' %}">
                      <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                          <i class="fas fa-users text-dark"></i>
                      </div>
                      <span class="nav-link-text ms-1">{{ _('Profile') }}</span>
                  </a>
              </li>
              {% if user.userroles.role == 'user' %}
              <li class="nav-item">
                  <a class="nav-link" href="{% url 'published_course_list' %}">
                      <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                          <i class="fas fa-book text-dark"></i>
                      </div>
                      <span class="nav-link-text ms-1">{{ _('Available Courses') }}</span>
                  </a>
              </li>
              {% endif %}
               {% if user.userroles.role == 'user' %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'my_courses_list' %}">
                        <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="fas fa-book text-dark"></i>
                        </div>
                        <span class="nav-link-text ms-1">{{ _('My Courses') }}</span>
                    </a>
                </li>
                {% endif %}
              {% if user.userroles.role == 'admin' or user.userroles.role == 'manager' %}
              <li class="nav-item">
                  <a class="nav-link" href="#" id="navbarDropdown" role="button"
                     aria-expanded="false">
                      <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                          <i class="fas fa-plus-circle text-dark"></i>
                      </div>
                      <span class="nav-link-text ms-1">{{ _('Courses') }}</span>
                  </a>
              </li>
              {% endif %}
              <li class="nav-item">
                  <a class="nav-link" href="{% url 'logout' %}">
                      <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                          <i class="fas fa-sign-out-alt text-dark"></i>
                      </div>
                      <span class="nav-link-text ms-1">{{ _('Logout') }}</span>
                  </a>
              </li>
          </ul>
      </div>
  </aside>

  <style>
    .custom-dropdown-menu {
        background-color: #BE398D;
    }

    .navbar-nav .dropdown {
        position: relative;
    }
  </style>

<div style="display: flex; flex-direction: column; width: -webkit-fill-available;" >
    <h2>Available Courses</h2>
    <div class="card">
            <div class="card-body pt-4 p-3">
              <ul class="list-group">
                    {% for course in page_obj %}
                        <li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg">
                            <div class="d-flex flex-column">
                                <form method="post" action="{% url 'details_course' course.pk %}">
                                  {% csrf_token %}
                                  <button type="submit" style="font-size: large; padding-left: 0px !important;" class="btn btn-link text-dark text-gradient px-3 mb-0">{{ course.title }}</button>
                                </form>
                                <span class="mb-2 text-xs">Course Description:<span class="text-dark font-weight-bold ms-sm-2">{{ course.description }}</span></span>
                                <span class="mb-2 text-xs">Course Level:<span class="text-dark ms-sm-2 font-weight-bold">{{ course.level }}</span></span>
                                <span class="mb-2 text-xs">Published Date:<span class="text-dark ms-sm-2 font-weight-bold">{{ course.publish_date }}</span></span>
                                <span class="mb-2 text-xs">People Enrolled:<span class="text-dark ms-sm-2 font-weight-bold">{{ course.enrolled_count }}</span></span>
                            </div>
                        </li>
                    {% endfor %}
              </ul>
            </div>
    </div>
    {% if page_obj.has_previous %}
      <a href="?page={{ page_obj.previous_page_number }}">Previous</a>
    {% endif %}
    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}">Next</a>
    {% endif %}

    <!-- Pagination -->
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
          <li class="page-item">
            <a class="page-link" href="?page=1" aria-label="First">
              <span aria-hidden="true">&laquo;&laquo;</span>
            </a>
          </li>
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
        {% endif %}
        {% for num in page_obj.paginator.page_range %}
          <li class="page-item {% if page_obj.number == num %}active{% endif %}">
            <a class="page-link" href="?page={{ num }}">{{ num }}</a>
          </li>
        {% endfor %}
        {% if page_obj.has_next %}
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}" aria-label="Last">
              <span aria-hidden="true">&raquo;&raquo;</span>
            </a>
          </li>
        {% endif %}
      </ul>
    </nav>
  </div>

</div>
{% endblock content %}


